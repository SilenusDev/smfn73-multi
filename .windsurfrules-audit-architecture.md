# üîç R√àGLES AUDIT ARCHITECTURE (OBLIGATOIRES)

## ‚ö†Ô∏è AVANT TOUTE MODIFICATION : AUDIT COMPLET

### 1Ô∏è‚É£ COMPRENDRE L'EXISTANT (PRIORIT√â ABSOLUE)

**OBLIGATOIRE avant toute modification :**

```bash
# Lister l'architecture actuelle
podman pod ps                    # Pods actifs
ls -la pods/*/pod.yml.template  # Templates existants
grep "start.*pods" scripts/*.sh # Scripts utilisant les pods
```

**Questions √† se poser :**
- ‚úÖ Quels pods sont R√âELLEMENT utilis√©s par les scripts ?
- ‚úÖ Quels templates existent d√©j√† ?
- ‚úÖ Y a-t-il des incoh√©rences entre templates et scripts ?
- ‚úÖ Quel est le travail d√©j√† fait par l'utilisateur ?

### 2Ô∏è‚É£ IDENTIFIER LES DOUBLONS

**V√©rifier les architectures redondantes :**

```bash
# Exemple : Pod web vs pods s√©par√©s
# Si pods/web/pod.yml.template contient PHP+Apache+Composer
# ET que pods/php/ et pods/apache/ existent
# ‚Üí DOUBLON √Ä R√âSOUDRE
```

**INTERDICTION :**
- ‚ùå Cr√©er des templates sans v√©rifier s'ils existent d√©j√†
- ‚ùå Corriger des fichiers sans v√©rifier s'ils sont utilis√©s
- ‚ùå Supposer qu'un fichier est obsol√®te sans audit

### 3Ô∏è‚É£ VALIDER AVANT D'AGIR

**Format de validation obligatoire :**

```
üîç AUDIT D√âTECT√â :
- Template existant : pods/web/pod.yml.template (Apache+PHP+Composer)
- Script utilise : pods/php et pods/apache (s√©par√©s)
- Incoh√©rence identifi√©e

‚ùì QUELLE EST TON INTENTION ?
1. Utiliser le pod web combin√© (recommand√©)
2. Garder les pods s√©par√©s
3. Autre architecture

Confirme avant que je modifie quoi que ce soit.
```

## üéØ M√âTHODOLOGIE STRICTE

### Ordre d'ex√©cution OBLIGATOIRE :

```
1. AUDIT
   ‚îú‚îÄ Lister fichiers existants
   ‚îú‚îÄ Identifier ce qui est utilis√©
   ‚îî‚îÄ D√©tecter incoh√©rences

2. ANALYSE
   ‚îú‚îÄ Comprendre l'intention utilisateur
   ‚îú‚îÄ Identifier travail d√©j√† fait
   ‚îî‚îÄ Proposer solutions

3. VALIDATION
   ‚îú‚îÄ Pr√©senter options clairement
   ‚îú‚îÄ Demander confirmation
   ‚îî‚îÄ Attendre r√©ponse

4. EX√âCUTION
   ‚îú‚îÄ Modifier uniquement le n√©cessaire
   ‚îú‚îÄ Tester chaque √©tape
   ‚îî‚îÄ V√©rifier r√©sultat
```

## ‚ùå ERREURS √Ä NE PLUS COMMETTRE

### Erreur Type 1 : Correction Aveugle
```
‚ùå INTERDIT :
- Voir une erreur ‚Üí Corriger imm√©diatement
- Cr√©er des fichiers sans v√©rifier l'existant
- Modifier sans comprendre l'architecture globale

‚úÖ OBLIGATOIRE :
- Voir une erreur ‚Üí Audit complet ‚Üí Analyse ‚Üí Validation ‚Üí Correction
```

### Erreur Type 2 : Ignorer le Travail Existant
```
‚ùå INTERDIT :
- Cr√©er pods/php/pod.yml.template alors que pods/web/ existe d√©j√†
- Supposer qu'un fichier n'est pas utilis√©
- Cr√©er des doublons

‚úÖ OBLIGATOIRE :
- V√©rifier TOUS les fichiers existants
- Lire les scripts pour voir ce qui est appel√©
- Respecter l'architecture en place
```

### Erreur Type 3 : Manque de Communication
```
‚ùå INTERDIT :
- Prendre des d√©cisions architecturales sans validation
- Supposer l'intention de l'utilisateur
- Modifier silencieusement

‚úÖ OBLIGATOIRE :
- Pr√©senter les options clairement
- Demander confirmation pour toute d√©cision architecturale
- Expliquer les impacts
```

## üîß CHECKLIST AVANT MODIFICATION

**Cocher TOUTES ces cases avant toute modification :**

- [ ] J'ai list√© tous les pods existants (`podman pod ps`)
- [ ] J'ai list√© tous les templates existants (`ls pods/*/pod.yml.template`)
- [ ] J'ai v√©rifi√© quels pods sont utilis√©s dans les scripts (`grep -r "start.*pods" scripts/`)
- [ ] J'ai identifi√© les incoh√©rences architecture
- [ ] J'ai compris le travail d√©j√† fait par l'utilisateur
- [ ] J'ai propos√© des options claires
- [ ] J'ai re√ßu validation de l'utilisateur
- [ ] Je modifie UNIQUEMENT ce qui est n√©cessaire

## üìä RAPPORT D'AUDIT OBLIGATOIRE

**Format √† utiliser SYST√âMATIQUEMENT :**

```markdown
# üîç AUDIT ARCHITECTURE

## √âtat Actuel
- Pods actifs : [liste]
- Templates existants : [liste]
- Scripts utilisant pods : [liste]

## Incoh√©rences D√©tect√©es
- [Description pr√©cise]

## Solutions Propos√©es
1. Option A : [description + avantages/inconv√©nients]
2. Option B : [description + avantages/inconv√©nients]

## Recommandation
[Choix recommand√© avec justification]

‚ö†Ô∏è Attente de validation avant modification
```

## üéØ R√àGLE D'OR

**"COMPRENDRE AVANT D'AGIR"**

- Mode macro = Vision globale OBLIGATOIRE
- Audit AVANT correction
- Validation AVANT modification
- Respect du travail existant TOUJOURS
